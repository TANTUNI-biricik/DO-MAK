<!doctype html>
const customMsg = document.getElementById('customMsg');
const applyBtn = document.getElementById('applyBtn');
const applyPreset = document.getElementById('applyPreset');
const resetBtn = document.getElementById('resetBtn');


// HazÄ±r mesajlar (17 & 18 iÃ§in kÄ±sa seÃ§enekler)
const presets = {
'17': '17 yaÅŸ kutlamasÄ±! Oyunlar, pasta ve sÃ¼rprizler seni bekliyor. Gelirsen Ã§ok seviniriz!',
'18': '18. yaÅŸÄ±na hoÅŸ geldin! Ã–zel gece, mÃ¼zik ve anÄ±lar â€” bizimle kutla!',
};


applyPreset.addEventListener('click', ()=>{
const age = ageSelect.value;
customMsg.value = presets[age];
});


applyBtn.addEventListener('click', ()=>{
const name = nameEl.textContent || 'Ä°sim';
const age = ageSelect.value;
const msg = customMsg.value.trim() || presets[age];
greeting.textContent = `${name} â€” Mutlu ${age}. YÄ±l!`;
subtitle.textContent = msg;
ageText.textContent = age;
// kÃ¼Ã§Ã¼k kutlama animasyonu
triggerConfetti();
});


resetBtn.addEventListener('click', ()=>{
customMsg.value = '';
greeting.textContent = 'Ä°sim â€” Mutlu YÄ±llar!';
subtitle.textContent = 'Bu Ã¶zel gÃ¼nde seni de aramÄ±zda gÃ¶rmekten mutluluk duyarÄ±z ðŸŽ‚';
ageText.textContent = ageSelect.value;
});


// HÄ±zlÄ± dÃ¼zenle - isim/yer girme
document.getElementById('editBtn').addEventListener('click', ()=>{
const newName = prompt('Ä°sim girin:', nameEl.textContent);
if(newName) nameEl.textContent = newName;
const newPlace = prompt('Mekan:', placeEl.textContent==='[Mekan]'? 'Kafe X' : placeEl.textContent);
if(newPlace) placeEl.textContent = newPlace;
});


// Basit paylaÅŸ/yazdÄ±r/mÃ¼zik
document.getElementById('shareBtn').addEventListener('click', async ()=>{
const shareData = {title: 'DoÄŸum GÃ¼nÃ¼ Davetiyesi', text: greeting.textContent + ' â€” ' + subtitle.textContent, url: location.href};
if(navigator.share) try{ await navigator.share(shareData); }catch(e){}
else navigator.clipboard.writeText(location.href).then(()=>alert('BaÄŸlantÄ± kopyalandÄ±!'));
});
document.getElementById('invitePrint').addEventListener('click', ()=>window.print());
const music = document.getElementById('bgMusic');
document.getElementById('musicToggle').addEventListener('click', ()=>{ if(music.paused) {music.play().catch(()=>{}); this.textContent='MÃ¼zik Kapat'} else {music.pause(); this.textContent='MÃ¼zik AÃ§'} });


// Basit confetti (tetiklenebilir)
function triggerConfetti(){ /* hafif efekt: birkaÃ§ parÃ§a yukarÄ± fÄ±rlat */
const c = document.getElementById('confetti'); const ctx = c.getContext('2d');
let W = c.width = innerWidth, H = c.height = innerHeight;
const pieces = [];
for(let i=0;i<40;i++){ pieces.push({x:W/2, y:H/2, vx:(Math.random()-0.5)*8, vy:(Math.random()-2.5)*-8, w:6+Math.random()*10, h:6+Math.random()*6, rot:Math.random()*Math.PI}) }
let t=0;
function frame(){ t++; ctx.clearRect(0,0,W,H); for(let p of pieces){ p.x += p.vx; p.y += p.vy; p.vy += 0.35; ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot); ctx.fillStyle = 'hsl('+Math.floor(Math.random()*360)+',80%,60%)'; ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h); ctx.restore(); }
if(t<120) requestAnimationFrame(frame); else ctx.clearRect(0,0,W,H);
}
frame();
}


// Basit tarih sayacÄ± (Ã¶rnek olarak 7 gÃ¼n ileri)
const daysEl = document.getElementById('days'), hoursEl = document.getElementById('hours'), minsEl = document.getElementById('minutes'), secsEl = document.getElementById('seconds');
let eventDate = new Date(); eventDate.setDate(eventDate.getDate()+7);
document.getElementById('dateText').textContent = eventDate.toLocaleDateString('tr-TR');
function updateCountdown(){ const now=new Date(); const diff=eventDate-now; if(diff<=0){ daysEl.textContent='0'; hoursEl.textContent='00'; minsEl.textContent='00'; secsEl.textContent='00'; return; } const s=Math.floor(diff/1000); const days=Math.floor(s/(3600*24)); const hours=Math.floor((s%(3600*24))/3600); const mins=Math.floor((s%3600)/60); const secs=s%60; daysEl.textContent=String(days); hoursEl.textContent=String(hours).padStart(2,'0'); minsEl.textContent=String(mins).padStart(2,'0'); secsEl.textContent=String(secs).padStart(2,'0'); }
setInterval(updateCountdown,1000); updateCountdown();


// RSVP local demo
document.getElementById('rsvpSend').addEventListener('click', ()=>{ const name=document.getElementById('rsvpName').value.trim(); const email=document.getElementById('rsvpEmail').value.trim(); if(!name||!email){ alert('Ad ve e-posta gerekli.'); return;} const list=JSON.parse(localStorage.getItem('rsvps')||'[]'); list.push({name,email,msg:document.getElementById('rsvpMsg').value,when:new Date().toISOString()}); localStorage.setItem('rsvps',JSON.stringify(list)); alert('TeÅŸekkÃ¼rler, cevabÄ±n kaydedildi (tarayÄ±cÄ±).'); document.getElementById('rsvpName').value=''; document.getElementById('rsvpEmail').value=''; document.getElementById('rsvpMsg').value=''; });
document.getElementById('rsvpClear').addEventListener('click', ()=>{ localStorage.removeItem('rsvps'); alert('RSVP verileri temizlendi.'); });


// BaÅŸlangÄ±Ã§ deÄŸerleri
document.getElementById('name').textContent = 'Mert'; document.getElementById('greeting').textContent = 'Mert â€” Mutlu 17. YÄ±l!'; document.getElementById('ageText').textContent = '17';
</script>
</body>
</html>
